//>>built
define("cbtree/errors/createError",["dojo/_base/lang","dojo/request","../util/shim/Array"],function(_1,_2){"use strict";var _3={text:"Undefined error",code:0};var _4={};var _5={};function _6(_7){function _8(_9){var _a,_b;for(_a in _9){if(/\W/.test(_a)||!(_b=_9[_a])||!_b.text){return false;}}return true;};switch(Object.prototype.toString.call(_7)){case "[object Array]":_7.forEach(_6);break;case "[object Object]":if(_8(_7)){_5=_1.mixin(_5,_7);}break;}};function _c(_d,_e){var _f=(_d||"").replace(/Error$/,"");var _10=_f+"Error";var msg={type:_10,text:"",code:0};if(_f){msg=_1.mixin(msg,(_5[_10]||_5[_f]||_3));}msg.text=_e||msg.text;return msg;};function _11(_12,_13){function _14(_15,_16,_17){var _18=_12+(_16?(_19+_16+"()"):"");var _1a;if(_15 instanceof Error){for(var _1b in _15){if(_15.hasOwnProperty(_1b)){this[_1b]=_15[_1b];}}_1a={type:_15.name,code:(_15.code||0),text:(_17||_15.message)};}else{_1a=_c(_15,_17);}if(arguments.length>2){var _1c=Array.prototype.slice.call(arguments,3);_1a.text=_1a.text.replace(/\%\{(\d+)\}/g,function(_1d,_1e){return (_1c[_1e]!=undefined?_1c[_1e]:_1d);});}this.message=(_18.length?_18+": ":"")+_1a.text;this.code=_1a.code;this.name=_1a.type;};var _19=_12?"::":"";var _12=_12||"";_6(_13||{});_14.prototype=new Error();_14.prototype.constructor=_14;return _14;};_11.normalize=function(_1f,_20){var _21=_1f.split("!"),_21=_21.map(function(_22){return /^\./.test(_22)?_20(_22):_22;});return _21.join("!");};_11.load=function(_23,_24,_25){function _26(){if(--_27==0){_25(_11);}};var _28=_23.split("!"),_27=_28.length;_28.forEach(function(url){url=_24.toUrl(url);if(!(url in _4)){_2(url,{handleAs:"json"}).then(function(_29){_6(_29);_26();},function(err){_26();});_4[url]=true;}else{_26();}});};return _11;});