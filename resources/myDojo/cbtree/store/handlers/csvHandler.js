//>>built
define("cbtree/store/handlers/csvHandler",[],function(){"use strict";if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};}if(!String.prototype.occuranceOf){String.prototype.occuranceOf=function(c){return (this.length-this.replace(new RegExp(c,"g"),"").length)/c.length;};}function _1(_2){var i,id;for(i=0;i<_2.length;i++){if((id=_2[i])&&typeof id=="string"){id=id.trim().replace(/(^[A-Z])|([\s-_]+[A-Z,a-z])/g,function(m,p1,p2,_3){return _3?m.toUpperCase().replace(/[\s-_]*/,""):m.toLowerCase();});if(/^\d/.test(id)){_2[i]="$"+id;}}else{_2[i]="$column"+i;}}return _2;};function _4(_5,_6){var _7={};var i;for(i=0;i<_5.length;i++){_7[_5[i]]=_6[i];}return _7;};function _8(_9,_a){var _b=_9.split(_a);var _c="",_d="";var _e=[];var i,_f=1;for(i=0;i<_b.length;i++){_c+=_d+_b[i];if(!(_c.occuranceOf("\"")%2)){_e.push(_c);_c=_d="";_f++;}else{_d=_a;}}if(_c.length){var _10=new TypeError("Unterminated quoted string at substr: "+_f+" {"+_b[_f-1]+"}");_10.name="SyntaxError";throw _10;}return _e;};function _11(_12,_13){var _14,_15,_16=false;var _17=_12.trim();var _18=_12;if(/^".*"$/.test(_17)){_18=_17.replace(/^"|"$/g,"").replace(/""/g,"\"");_17=_18.trim();_16=true;}if(_16){if(_14=_17.match(/^\[(.*)\]$/)){_18=[];if(_15=_14[1]){var _19=_8(_15,",");for(var i=0;i<_19.length;i++){_18.push(_11(_19[i],_13));}}return _18;}}else{if(/^[+-]?(((0|[1-9][0-9]*)(\.[0-9]+)?)|\.[0-9]+)([eE][-+]?[0-9]+)?$/.test(_17)){return parseFloat(_17);}if(_17=="true"||_17=="false"){return (_17=="true");}}return (_13?_17:_18);};function _1a(_1b){var _1c=this;this.delimiter=",";this.newline="\r\n";this.trim=false;this.fieldNames=null;this.handler=function(_1d){var _1e=[],_1f=[];var _20,_21,i,j;if(_1d.status>=400){return _1d;}var _22=_8((_1d.data||_1d.text),_1c.newline);for(i=0;i<_22.length;i++){if(_20=_22[i].trim()){_21=_8(_20,_1c.delimiter);for(j=0;j<_21.length;j++){_1e.push(_11(_21[j],_1c.trim));}if(!_1c.fieldNames){_1c.fieldNames=_1(_1e);}else{_1f.push(_4(_1c.fieldNames,_1e));}_1e=[];}}return _1f;};this.set=function(_23,_24){if(_23){if(typeof _23=="object"){for(var key in _23){this.set(key,_23[key]);}}this[_23]=_24;}};if(_1b){this.set(_1b);}};return _1a;});