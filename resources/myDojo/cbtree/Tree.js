//>>built
require({cache:{"url:cbtree/templates/cbtreeNode.html":"<div class=\"dijitTreeNode\" role=\"presentation\">\n\t<div data-dojo-attach-point=\"rowNode\" class=\"dijitTreeRow\" role=\"presentation\">\n\t\t<div data-dojo-attach-point=\"indentNode\" class=\"dijitInline\"></div>\n\t\t<img src=\"${_blankGif}\" alt=\"\" data-dojo-attach-point=\"expandoNode\" class=\"dijitTreeExpando\" role=\"presentation\" />\n\t\t<span data-dojo-attach-point=\"expandoNodeText\" class=\"dijitExpandoText\" role=\"presentation\"></span>\n\t\t<span data-dojo-attach-point=\"checkBoxNode\" class=\"cbtreeCheckBox\" role=\"presentation\"></span>\n\t\t<span data-dojo-attach-point=\"contentNode\" class=\"dijitTreeContent\" role=\"presentation\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" data-dojo-attach-point=\"iconNode\" class=\"dijitIcon dijitTreeIcon\" role=\"presentation\"/>\n\t\t\t<span data-dojo-attach-point=\"labelNode,focusNode\" class=\"dijitTreeLabel\" role=\"treeitem\" tabindex=\"-1\" aria-selected=\"false\"></span>\n\t\t</span>\n\t</div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitTreeNodeContainer\" role=\"presentation\" style=\"display: none;\"></div>\n</div>\n"}});define("cbtree/Tree",["module","require","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/Deferred","dojo/dom-construct","dojo/has","dojo/keys","dojo/on","dojo/topic","dojo/text!./templates/cbtreeNode.html","dijit/registry","dijit/Tree","./CheckBox","./errors/createError!./errors/CBTErrors.json","./util/IE8_Event","./util/shim/Array"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,on,_b,_c,_d,_e,_f,_10,_11){var _12=_10(_1.id);var ie=_9("ie");var _13=0;var _14=_4([_e._TreeNode],{templateString:_c,_checkBox:null,_toggle:true,_widget:null,constructor:function(_15){var _16={type:_f,target:"INPUT",mixin:null,postCreate:null};var _17={multiState:null,checked:undefined,value:"on"};var _18=_15.widget;if(_18){_5.mixin(_17,_18.args);_5.mixin(_16,_18);}_16.args=_17;this._toggle=(typeof _16.type.prototype.toggle=="function");this._widget=_16;},_getCheckedAttr:function(){if(this._checkBox){return this.tree.model.getChecked(this.item);}},_getEnabledAttr:function(){return this.tree.model.getEnabled(this.item);},_set_checked_Attr:function(_19){if(this._checkBox){this._checkBox.set("checked",_19);}},_set_enabled_Attr:function(_1a){if(this._checkBox){this._checkBox.set("readOnly",!_1a);}},_setCheckedAttr:function(_1b){if(this._checkBox){return this.tree.model.setChecked(this.item,_1b);}},_setEnabledAttr:function(_1c){if(this.tree.model.setEnabled(this.item,_1c)===undefined){this.set("_enabled_",!!_1c);}},_createCheckBox:function(_1d){var _1e=(this.tree.attachToForm===true);var _1f=this.tree.model;var _20=true;var _21=_1f.getChecked(this.item);var _22=this._widget;var _23=_22.args;if(typeof _1f.getEnabled=="function"){_20=_1f.getEnabled(this.item);}if(_21!==undefined){_23.multiState=_1d;_23.checked=_21;_23.value=this.label;if(typeof _22.mixin=="function"){_5.hitch(this,_22.mixin)(_23);}this._checkBox=new _22.type(_23);if(this._checkBox){if(_1e){this._checkBox.set("name",this._checkBox.id);}else{this._checkBox.name=this._checkBox.id;}this._checkBox.item=this.item;if((!this.isExpandable&&!this.tree.leafCheckBox)||(this.isExpandable&&!this.tree.branchCheckBox)){this._checkBox.domNode.style.display="none";}if(typeof this._widget.postCreate=="function"){_5.hitch(this._checkBox,this._widget.postCreate)(this);}_8.place(this._checkBox.domNode,this.checkBoxNode,"replace");}}if(this._checkBox){if(this.isExpandable){if(this.tree.branchReadOnly||!_20){this._checkBox.set("readOnly",true);}}else{if(this.tree.leafReadOnly||!_20){this._checkBox.set("readOnly",true);}}}},_remove:function(){var _24=this.getParent();var _25=this.tree;var _26=_25.model;function _27(_28){if(!_28._destroyed){var _29=_26.getIdentity(_28.item);var _2a=_25._itemNodesMap[_29];if(_2a.length==1){delete _25._itemNodesMap[_29];}else{var _2b=_2a.indexOf(_28);if(_2b!=-1){_2a.splice(_2b,1);}}_25.dndController.removeTreeNode(_28);_28.getChildren().forEach(_27);if(_25.persist&&_28.isExpanded){_25._state(_28,false);}}};_27(this);if(_24&&this!=_25.rootNode){_24.removeChild(this);}this.destroyRecursive();},_setExpando:function(){this.rowNode.setAttribute("expandable",this.isExpandable.toString());this.inherited(arguments);},_toggleCheckBox:function(){var _2c,_2d;if(this._checkBox){if(this._toggle){_2c=this._checkBox.toggle();}else{_2d=this._checkBox.get("checked");_2c=(_2d=="mixed"?true:!_2d);}this._checkBox.set("checked",_2c);}return _2c;},destroy:function(){if(this._checkbox){this._checkbox.destroyRecursive();delete this._checkbox;}this.inherited(arguments);},postCreate:function(){var _2e=this.tree,_2f=null;if(_2e.checkBoxes===true){this._createCheckBox(_2e._multiState);}if(_2e._hasStyling&&_2e._iconAttr){_2f=_2e.get("icon",this.item);if(_2f){this.set("_icon_",_2f);}}this.set("tooltip",this.title);this.inherited(arguments);}});var _30=_4([_e],{attachToForm:false,branchCheckBox:true,branchIcons:true,branchReadOnly:false,checkBoxes:true,clickEventCheckBox:true,closeOnUnchecked:false,deleteRecursive:false,enableDelete:false,leafCheckBox:true,leafIcons:true,leafReadOnly:false,openOnChecked:false,_multiState:true,_customWidget:null,_eventAttrMap:null,_dojoRequired:{min:{major:1,minor:8},max:{major:1,minor:99}},_checkboxBaseClass:_f.prototype.baseClass,_assertVersion:function(){if(dojo.version){var _31=199,_32=0;_13=(dojo.version.major*100)+dojo.version.minor;if(this._dojoRequired){if(this._dojoRequired.min!==undefined){_32=(this._dojoRequired.min.major*100)+this._dojoRequired.min.minor;}if(this._dojoRequired.max!==undefined){_31=(this._dojoRequired.max.major*100)+this._dojoRequired.max.minor;}if(_13<_32||_13>_31){throw new _12("InvalidVersion","_assertVersion");}}}else{throw new _12("UnknownVersion","_assertVersion");}},_createTreeNode:function(_33){_33.widget=this._customWidget;if(this._hasStyling&&this._icon){_33.icon=this._icon;}return new _14(_33);},_onCheckBoxClick:function(evt,_34){var _35=_34._checkBox.get("checked");var _36=_34.item;this.model.setChecked(_36,_35);if(_35&&this.openOnChecked){this.expandChecked();}else{if(!_35&&this.closeOnUnchecked){this.collapseUnchecked();}}this.onCheckBoxClick(_36,_34,evt);if(this.clickEventCheckBox){this.onClick(_36,_34,evt);}this.focusNode(_34);_b.publish("checkbox",{item:_36,node:_34,state:_35,evt:evt});evt.stopPropagation();return _35;},_onClick:function(_37,evt){var _38=_d.getEnclosingWidget(evt.target);if(_38.isInstanceOf(_14)){this.inherited(arguments);}},_onItemChange:function(_39,_3a,_3b){var _3c=this._eventAttrMap[_3a];if(_3c){var _3d=this.model.getIdentity(_39),_3e=this._itemNodesMap[_3d],_3f={};if(_3e){if(_3c.value){if(typeof _3c.value=="function"){_3f[_3c.attribute]=_5.hitch(this,_3c.value)(_39,_3c.attribute,_3b);}else{_3f[_3c.attribute]=_3c.value;}}else{_3f[_3c.attribute]=_3b;}_3e.forEach(function(_40){_40.item=_39;_40.set(_3f);},this);}}},_onItemDelete:function(_41){var _42=this.model.getIdentity(_41);var _43=this._itemNodesMap[_42];if(_43){_43=_43.slice(0);_43.forEach(function(_44){_44._remove();});}},_onDeleteKey:function(){var evt=arguments[0];if(_13<109){evt=evt.evt;}if(_3.isCopyKey(evt)){if(this.enableDelete&&typeof this.model.deleteItem=="function"){var _45=this.paths.map(function(_46){return _46[_46.length-1];});if(_45.length){this.model.deleteItem(_45,this.deleteRecursive);}}}},_onEnterKey:function(_47){var _48=_47.node;var evt=_47.evt;if(!evt.altKey&&evt.keyCode==_a.SPACE){this._onSpaceKey(evt,_48);}this.inherited(arguments);},_onSpaceKey:function(evt,_49){if(_49&&_49._checkBox){if(!evt.altKey&&evt.keyCode==_a.SPACE){_49._toggleCheckBox();this._onCheckBoxClick(evt,_49);}}},_onLabelChange:function(_4a,_4b){this.mapEventToAttr(_4a,_4b,"label");},_onModelReset:function(){var _4c=_5.clone(this._openedNodes);var _4d=this.model;var _4e=this;this.onLoadDeferred.always(function(){if(_4e.rootNode&&!_4e.rootNode._destroyed){_4e._onItemDelete(_4e.rootNode.item);}_4d.ready().then(function(){_4e.expandChildrenDeferred=new _7();_4e.pendingCommandsDeferred=_4e.expandChildrenDeferred;if(_4e.persist){_4e._openedNodes=_4c;}_4e._load();_4e.onLoadDeferred=_4e.pendingCommandsPromise;_4e.onLoadDeferred.then(_5.hitch(_4e,"onLoad"));},function(err){throw err;});});},_onSubmit:function(evt){var _4f=evt;if(ie&&ie<9){_4f=new _11(this.formNode,"submit",{cancelable:true},evt);_4f.defaultPrevented=!!evt.returnValue;}if(!_4f.defaultPrevented){if(this.onSubmit(this.formNode,this,_4f)===false){_4f.preventDefault();}}return !_4f.defaultPrevented;},_setAttachToFormAttr:function(_50){var _51="./extensions/TreeOnSubmit";var _52=this;if(_50){if(typeof _50==="boolean"||typeof _50==="object"){if(typeof _50==="object"&&!this._hasOnSubmit){_2([_50.extension||_51],function(_53){_6.around(_52,"onSubmit",function(){return _53.prototype.onSubmit;});this._hasOnSubmit=true;});}this.attachToForm=_50;}else{throw new _12("InvalidType","_setAttachToFormAttr");}}else{this.attachToForm=false;}},_setWidgetAttr:function(_54){var _55=_54,_56="checked",_57,_58;if(typeof _54=="string"){return this._setWidgetAttr({type:_54});}if(_5.isObject(_54)&&_54.hasOwnProperty("type")){_55=_54.type;if(typeof _55=="function"){_58=_55.prototype;this._checkboxBaseClass=_55.prototype.baseClass;if(_58&&_58[_56]!==undefined){if(typeof _58.get=="function"&&typeof _58.set=="function"){this._customWidget=_54;return;}else{_57="Widget does not support get() and/or set()";}}else{_57="widget MUST have a 'checked' property";}}else{if(typeof _55=="string"&&~_55.indexOf("/")){var _59=this;_2([_55],function(_5a){_54.type=_5a;_59._setWidgetAttr(_54);});return;}else{_57="argument is not a valid module id";}}}else{_57="Object is missing required 'type' property";}throw new _12("InvalidWidget","_setWidgetAttr",_57);},collapseUnchecked:function(_5b){_5b=_5b||this.rootNode;if(_5b&&_5b.isExpandable&&_5b.isExpanded){var _5c=_5b.getChildren(_5b);_5c.forEach(function(_5d){this.collapseUnchecked(_5d);},this);if(this.model.getChecked(_5b.item)===false){this._collapseNode(_5b);}}},create:function(){this._assertVersion();this.inherited(arguments);},destroy:function(){this.model=null;this.inherited(arguments);},expandChecked:function(_5e){var _5f=false;if(!_5e){_5e=this.rootNode;_5f=!_5e._checkBox;}if(_5e&&_5e.isExpandable&&(_5f||this.model.getChecked(_5e.item))){if(!_5e.isExpanded){this._expandNode(_5e);}var _60=_5e.getChildren(_5e);_60.forEach(function(_61){this.expandChecked(_61);},this);}},getIconStyle:function(_62){var _63=this.model.mayHaveChildren(_62);var _64=this.inherited(arguments)||{};if(_63){if(!this.branchIcons){_64.display="none";}}else{if(!this.leafIcons){_64.display="none";}}return _64;},mixinEvent:function(_65,_66,_67){if(this.model.isItem(_65)&&this._eventAttrMap[_66]){this._onItemChange(_65,_66,_67);this.onEvent(_65,_66,_67);}},onCheckBoxClick:function(){},onEvent:function(){},onSubmit:function(){},postMixInProperties:function(){this._eventAttrMap={};this.inherited(arguments);},postCreate:function(){var _68=this.domNode.parentNode;var _69=this.model;var _6a=this;if(this.model){if(this.checkBoxes===true){if(this._modelOk()){this._multiState=_69.multiState;this.mapEventToAttr(null,(_69.get("checkedAttr")||"checked"),"_checked_");_69.validateData();}else{console.warn(_69.id+"::postCreate(): model does not support getChecked() and/or setChecked().");this.checkBoxes=false;}}_6.after(_69,"onLabelChange",_5.hitch(this,"_onLabelChange"),true);_6.after(_69,"onReset",_5.hitch(this,"_onModelReset"),true);this.mapEventToAttr(null,_69.get("enabledAttr"),"_enabled_");this.mapEventToAttr(null,_69.get("labelAttr"),"label");this.inherited(arguments);var _6b="."+this._checkboxBaseClass;if(_13<109){this.own(on(this.domNode,on.selector(_6b,"click"),function(evt){_6a._onCheckBoxClick(evt,_d.getEnclosingWidget(this.parentNode));}));this._onKeyDown(null,{});this._keyHandlerMap[_a.DELETE]="_onDeleteKey";}else{this.own(on(this.containerNode,on.selector(_6b,"click"),function(evt){_6a._onCheckBoxClick(evt,_d.getEnclosingWidget(this.parentNode));}));this._keyNavCodes[_a.DELETE]=_5.hitch(this,"_onDeleteKey");this._keyNavCodes[_a.SPACE]=_5.hitch(this,"_onSpaceKey");}this.on("load",function(){if(!_6a.autoExpand&&_6a.openOnChecked){_6a.expandChecked();}});while(_68){if(_68.nodeName==="FORM"){on(_68,"submit",_5.hitch(this,"_onSubmit"));break;}_68=_68.parentNode;}this.formNode=_68;}else{throw new _12("PropertyMissing","postCreate","no model was specified");}},mapEventToAttr:function(_6c,_6d,_6e,_6f){if(typeof _6d=="string"&&typeof _6e=="string"){if(_6d.length&&_6e.length){if(_6c){delete this._eventAttrMap[_6c];}this._eventAttrMap[_6d]={attribute:_6e,value:_6f};}}},_modelOk:function(){if((this.model.getChecked&&typeof this.model.getChecked=="function")&&(this.model.setChecked&&typeof this.model.setChecked=="function")){return true;}return false;}});_30._TreeNode=_14;return _30;});