//>>built
define("cbtree/models/StoreModel-API",["dojo/_base/array","dojo/_base/lang","dojo/has","./TreeStoreModel"],function(_1,_2,_3,_4){_3.add("cbtree-storeModel-API",true);_2.extend(_4,{_checkOrUncheck:function(_5,_6,_7,_8,_9){var _a=0,_b=0;this.fetchItemsWithChecked(_5,function(_c){_1.forEach(_c,function(_d){if(this.store.getValue(_d,this.checkedAttr)!=_6){this._ItemCheckedSetter(_d,_6);_b+=1;}_a+=1;},this);if(_7){_7.call((_8?_8:this),_a,_b);}},this,_9);},_ItemCheckedGetter:function(_e){return this.getChecked(_e);},_ItemCheckedSetter:function(_f,_10){this.setChecked(_f,_10);},_ItemIdentityGetter:function(_11){if(this.store.isItem(_11)){return this.store.getIdentity(_11);}else{if(_11===this.root){return this.root.id;}}throw new TypeError(this.moduleName+"::getIdentity(): invalid item specified.");},_ItemIdentitySetter:function(_12,_13){throw new Error(this.moduleName+"::setItemAttr(): Identity attribute cannot be changed");},_ItemLabelGetter:function(_14){if(_14!==this.root){if(this.labelAttr){return this.store.getValue(_14,this.labelAttr);}else{return this.store.getLabel(_14);}}return this.root.label;},_ItemLabelSetter:function(_15,_16){var _17=this.get("labelAttr");if(_17){if(_17!=this.store.getIdentifierAttr()){return this.store.setValue(_15,_17,_16);}throw new Error(this.moduleName+"::setItemAttr(): Label attribute {"+_17+"} cannot be changed");}},_ItemParentsGetter:function(_18){return this.getParents(_18);},getItemAttr:function(_19,_1a){var _1b=(_1a==this.checkedAttr?"checked":_1a);if(this.isItem(_19)||_19===this.root){var _1c=this._getFuncNames("Item",_1b);if(_2.isFunction(this[_1c.get])){return this[_1c.get](_19);}else{if(_19===this.root&&this.hasFakeRoot){return this.root[_1b];}return this.store.getValue(_19,_1b);}}throw new Error(this.moduleName+"::getItemAttr(): argument is not a valid store item.");},setItemAttr:function(_1d,_1e,_1f){if(this._writeEnabled){var _20=(_1e==this.checkedAttr?"checked":_1e);if(this.isItem(_1d)){var _21=this._getFuncNames("Item",_20);if(_2.isFunction(this[_21.set])){return this[_21.set](_1d,_1f);}else{return this.store.setValue(_1d,_20,_1f);}}else{throw new Error(this.moduleName+"::setItemAttr(): argument is not a valid store item.");}}else{throw new Error(this.moduleName+"::setItemAttr(): store is not write enabled.");}},fetchItem:function(_22,_23){var _24=this.store.getIdentifierAttr();var _25=this._anyToQuery(_22,_23);if(_25){if(_25[_24]!=this.root.id){return this.store.itemExist(_25);}return this.root;}},fetchItemsWithChecked:function(_26,_27,_28,_29){var _2a=this._anyToQuery(_26,null);var _2b=[];var _29=(_29!==undefined)?_29:true;var _28=_28||this;if(_2.isObject(_2a)){this.store.fetch({query:_2a,queryOptions:{deep:true,storeOnly:_29},onItem:function(_2c,_2d){if(this.store.hasAttribute(_2c,this.checkedAttr)){_2b.push(_2c);}else{if(this.checkedAll){this.setChecked(_2c,this.checkedState);_2b.push(_2c);}}},onComplete:function(){if(_27){_27.call(_28,_2b);}},onError:this.onError,scope:this});}else{throw new Error(this.moduleName+"::fetchItemsWithChecked(): query must be of type object.");}},isRootItem:function(_2e){if(_2e!==this.root){return this.store.isRootItem(_2e);}return true;},addReference:function(_2f,_30,_31){var _32=_31||this.childrenAttrs[0];if(this.store.addReference(_2f,_30,_32)){this._updateCheckedParent(_2f);}},attachToRoot:function(_33){if(_33!==this.root){this.store.attachToRoot(_33);}},check:function(_34,_35,_36,_37){if(this.checkedStrict){_37=true;}this._checkOrUncheck(_34,true,_35,_36,_37);},detachFromRoot:function(_38){if(_38!==this.root){this.store.detachFromRoot(_38);}},newReferenceItem:function(_39,_3a,_3b){var _3c;_3c=this.newItem(_39,_3a,_3b);if(_3c){this.store.attachToRoot(_3c);}return _3c;},removeReference:function(_3d,_3e,_3f){var _40=_3f||this.childrenAttrs[0];if(this.store.removeReference(_3d,_3e,_40)){this.getChildren(_3e,_2.hitch(this,function(_41){if(_41.length){this._updateCheckedParent(_41[0]);}}));}},uncheck:function(_42,_43,_44,_45){if(this.checkedStrict){_45=true;}this._checkOrUncheck(_42,false,_43,_44,_45);},_anyToQuery:function(_46,_47){var _48=this.store.getIdentifierAttr();if(_48){var _49=_47?_47:_48,_4a={};if(_2.isString(_46)){_4a[_48]=_46;return _4a;}if(_2.isObject(_46)){_2.mixin(_4a,_46);if(_46[_49]){_4a[_48]=_46[_49];}return _4a;}}return null;},_getFuncNames:function(_4b,_4c){if(_2.isString(_4c)){var cc=_4c.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();});var _4d={set:"_"+_4b+cc+"Setter",get:"_"+_4b+cc+"Getter"};return _4d;}throw new Error(this.moduleName+"::_getFuncNames(): get"+_4b+"/set"+_4b+" attribute name must be of type string.");}});});