//>>built
define("cbtree/data/FileStore",["dojo/_base/array","dojo/_base/declare","dojo/_base/json","dojo/_base/lang","dojo/_base/window","dojo/_base/xhr","dojo/Evented","./util/filter","./util/sorter"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){var _a="_S";var _b="_SR";var _c="_PRM";var _d="_EX";var _e="children";var _f="path";var _10=_2([_7],{constructor:function(_11){this._features={"dojo.data.api.Read":true,"dojo.data.api.Write":true,"dojo.data.api.Identity":true,"dojo.data.api.Notification":true};this._loadInProgress=false;this._loadFinished=false;this._closePending=false;this._requestQueue=[];this._authToken=null;this._itemsByIdentity={};this._allFileItems=[];this._privateAttrs=[_a,_c,_d,_b];this._readOnlyAttrs=["name","size","modified","directory","icon",_e,_f];this._rootDir=null;this._rootId=".";for(var _12 in _11){this.set(_12,_11[_12]);}dojo.deprecated("{cbtree/data/FileStore}","Migrate to cbtree/store/FileStore","2.0");},authToken:null,basePath:".",cache:false,clearOnClose:false,failOk:false,options:[],url:"",urlPreventCache:false,moduleName:"cbTree/store/FileStore",_addIconClass:false,_labelAttr:"name",_validated:false,_assertIsItem:function(_13){if(!this.isItem(_13)){throw new Error(this.moduleName+"::_assertIsItem(): Invalid item argument.");}},_assertIsAttribute:function(_14,_15){if(typeof _14!=="string"){throw new Error(this.moduleName+"::"+_15+"(): Invalid attribute argument.");}},_assertSupport:function(_16){throw new Error(this.moduleName+"::"+_16+"(): Function not supported on a File Store.");},_containsValue:function(_17,_18,_19,_1a){if(typeof _17[_18]!=="undefined"){return _1.some(this.getValues(_17,_18),function(_1b){if(_1b!==null&&!_4.isObject(_1b)&&_1a){if(_1b.toString().match(_1a)){return true;}}else{if(_19===_1b){return true;}}});}else{return (_19===false||_19===undefined);}},_deleteFromServer:function(_1c){var _1d=_1c.scope||_5.global;var _1e=_1c.item;var _1f=this.getPath(_1e);var _20="DELETE";var _21=this;if(this._loadInProgress){this._queueRequest({args:_1c,func:this._deleteFromServer,scope:_21});}else{this._loadInProgress=true;var _22={path:_1f};var _23=this._requestToArgs(_20,_22);var _24=_6.del(_23);var _25;_24.addCallback(function(_26){try{_25=_21._updateFileStore(_20,_26,_1c);_21._loadInProgress=false;if(_1c.onComplete){_1c.onComplete.call(_1d,_25);}}catch(error){_21._loadInProgress=false;if(_1c.onError){_1c.onError.call(_1d,error);}else{console.error(error);}}_21._handleQueuedRequest();});_24.addErrback(function(_27){_21._loadInProgress=false;switch(_23.status){case 404:case 410:_21._resyncStore(_1e,true);break;case 400:case 405:case 500:default:if(_1c.onError){_1c.onError.call(_1d,_27,_23.status);}break;}_21._handleQueuedRequest();});}},_deleteFromStore:function(_28,_29){var _2a=_28[_f];var _2b=this.getValue(_28,_c);var _2c=this.getValues(_2b,_e);var _2d=[];if(_28.directory){var _2e=this.getValues(_28,_e);var _2f;var i;for(i=0;i<_2e.length;i++){_2f=this._deleteFromStore(_2e[i],false);_2d=_2d.concat(_2f);}_28[_d]=false;}this._removeArrayElement(this._allFileItems,_28);this._removeArrayElement(_2c,_28);delete this._itemsByIdentity[_2a];_28[_a]=null;_28["deleted"]=true;_2d.push(_28);this._setValues(_2b,_e,_2c,_29);this.onDelete(_28);return _2d;},_fetchFinal:function(_30,_31){var _32=_30.scope||_5.global,_33=this,_34=[],_35=0;function _36(_37,_38){var _39=_37.queryOptions||{},_3a=_39.ignoreCase||false,_3b=_37.query||null,_34=[],i;if(_38){if(_3b){var _3c={},_3d,_3e,key,_3f;for(key in _3b){_3f=_3b[key];if(typeof _3f==="string"){_3c[key]=_8.patternToRegExp(_3f,_3a);}else{if(_3f instanceof RegExp){_3c[key]=_3f;}}}for(i=0;i<_38.length;++i){_3e=_38[i];_3d=true;for(key in _3b){_3f=_3b[key];if(!_33._containsValue(_3e,key,_3f,_3c[key])){_3d=false;break;}}if(_3d){_34.push(_3e);}}}else{_34=_38.slice(0);}if(_34.length&&_37.sort){var _40=new _9(_37.sort);_34.sort(_40.sortFunction());}var _41=_37.start?_37.start:0;var _42=(_37.count&&isFinite(_37.count))?_37.count:_34.length;if(_41||_42!==_34.length){_34=_34.slice(_41,_41+_42);}return _34;}return null;};_30.abort=function(){this.aborted=true;};_30.store=this;if(_30.aborted!==true){_34=_36(_30,_31);_35=_34?_34.length:-1;if(_30.onBegin){_30.onBegin.call(_32,_35,_30);}if(_30.onItem&&_35>0){for(i=0;(i<_35&&_30.aborted!==true);i++){_30.onItem.call(_32,_34[i],_30);}}if(_30.onComplete){if(_30.onItem||_30.aborted||_35<0){_30.onComplete.call(_32,null,_30);}else{_30.onComplete.call(_32,_34,_30);}}}if(_30.onAbort&&_30.aborted){_30.onAbort.call(_32,_30);}},_getItemsArray:function(_43){if(_43&&_43.deep){return this._allFileItems;}return this._rootDir[_e];},_getItemByIdentity:function(_44){var _45=null;if(this._itemsByIdentity){if(Object.hasOwnProperty.call(this._itemsByIdentity,_44)){_45=this._itemsByIdentity[_44];}}return _45;},_handleQueuedRequest:function(){var _46,_47;while(this._requestQueue.length>0&&!this._loadInProgress){_47=this._requestQueue.shift();_46=_47.func;_46.call(_47.scope,_47.args);}},_isPrivateAttr:function(_48){var i;for(i in this._privateAttrs){if(_48==this._privateAttrs[i]){return true;}}return false;},_isReadOnlyAttr:function(_49){var i;for(i in this._readOnlyAttrs){if(_49==this._readOnlyAttrs[i]){return true;}}return false;},_queueRequest:function(_4a){if(!this._closePending){this._requestQueue.push(_4a);}else{var _4b=_4a.args;_4b.closePending=true;this._fetchFinal(_4b,null);}},_removeArrayElement:function(_4c,_4d){var _4e=_1.indexOf(_4c,_4d);if(_4e!=-1){_4c.splice(_4e,1);return true;}return false;},_renameItem:function(_4f){var _50=_4f.scope||_5.global;var _51=_4f.item;var _52=this.getPath(_51);var _53="POST";var _54=this;if(this._loadInProgress){this._queueRequest({args:_4f,func:this._renameItem,scope:_54});}else{this._loadInProgress=true;var _55=_4f.newValue;var _56={path:_52,newValue:_55};var _57=this._requestToArgs(_53,_56);var _58=_6.post(_57);_58.addCallback(function(_59){try{_54._updateFileStore(_53,_59,_4f);_54._loadInProgress=false;if(_4f.onItem){_4f.onItem.call(_50,_54._getItemByIdentity(_55));}}catch(error){_54._loadInProgress=false;if(_4f.onError){_4f.onError(error);}else{console.error(error);}}_54._handleQueuedRequest();});_58.addErrback(function(_5a){_54._loadInProgress=false;switch(_57.status){case 404:case 410:_54._resyncStore(_51);break;}if(_4f.onError){_4f.onError.call(_50,_5a,_57.status);}_54._handleQueuedRequest();});}},_requestToArgs:function(_5b,_5c){var _5d={},_5e=null,_5f=false;if(this.basePath){_5d.basePath=this.basePath;}if(_5c.path){_5d.path=_5c.path;}if(this.authToken){_5d.authToken=_3.toJson(this.authToken);}if(_5c.sync){_5f=_5c.sync;}switch(_5b){case "DELETE":break;case "GET":if(_5c.queryOptions){_5d.queryOptions=_3.toJson(_5c.queryOptions);}if(this.options&&this.options.length){_5d.options=_3.toJson(this.options);}break;case "POST":if(_5c.newValue){_5d.newValue=_5c.newValue;}break;}_5e={url:this.url,handleAs:"json",content:_5d,preventCache:this.urlPreventCache,handle:function(_60,_61){this.status=_61.xhr.status;},failOk:this.failOk,status:200,sync:_5f};return _5e;},_resyncStore:function(){var _62=this.getParents(item)[0];if(_62){var _63={item:_62,forceLoad:true};this.loadItem(_63);}else{if(item===this._rootDir){throw new Error(this.moduleName+"::_resyncStore(): Store root directory failed to reload.");}else{throw new Error(this.moduleName+"::_resyncStore(): File Store is corrupt.");}}},_setAuthTokenAttr:function(_64){if(_4.isObject(_64)){this.authToken=_64;}return false;},_setOptionsAttr:function(_65){var i;if(_4.isArray(_65)){this.options=_65;}else{if(_4.isString(_65)){this.options=_65.split(",");}else{throw new Error(this.moduleName+"::_setOptionsAttr(): Options must be a comma"+" separated string of keywords"+" or an array of keyword strings.");}}for(i=0;i<this.options.length;i++){if(this.options[i]==="iconClass"){this._addIconClass=true;}}return this.options;},_setValue:function(_66,_67,_68,_69){var _6a;_6a=_66[_67];_66[_67]=_68;if(_69){this.onSet(_66,_67,_6a,_68);}return true;},_setValues:function(_6b,_6c,_6d,_6e){var _6f;var i;_6f=this.getValues(_6b,_6c);if(_4.isArray(_6d)){if(_6d.length===0&&_6c!==_e){delete _6b[_6c];_6d=undefined;}else{_6b[_6c]=_6d.slice(0,_6d.length);}}else{throw new Error(this.moduleName+"::setValues(): newValues not an array");}if(_6e){this.onSet(_6b,_6c,_6f,_6d);}return true;},_updateFileStore:function(_70,_71,_72){var _73=this;function _74(_75){var _76=[];var _77=_73._getItemByIdentity(_75);if(_77){_76=_73._deleteFromStore(_77,true);}return _76;};function _78(_79){var _7a=_73._getItemByIdentity(_79);if(!_7a){_7a=_73._rootDir;if(_7a){var _7b=_79.split("/");var _7c=".";var _7d=null;for(i=0;i<_7b.length;i++){if(_7b[i]!=="."){_7c=_7c+"/"+_7b[i];_7d=_73._getItemByIdentity(_7c);if(!_7d){_7d={name:_7b[i],path:_7c,directory:true,size:0};_7d[_e]=[];_7d[_d]=false;_7a=_7e(_7d,_7a,true);}else{_7a=_7d;}}}}else{_7a=_7e(null,null,false);return _78(_79);}}return _7a;};function _7f(_80,_81,_82){var _83=false;var _84={};var _85,_86;var _87;for(_87 in _81){if(_87!=_e&&_87!=_d){_85=_81[_87];if(!(_87 in _80)||(_80[_87]!==_85&&(!(_87 in _84)||_84[_87]!==_85))){_86=_80[_87];_80[_87]=_85;if(_82){_73.onSet(_80,_87,_86,_85);}_83=true;}}}return _83;};function _7e(_88,_89,_8a){if(_89){var _8b=_73.getIdentity(_88);var _8c=_73._getItemByIdentity(_8b);if(!_8c){var _8d=_73.getValues(_89,_e);var _8e=_73.getValues(_89,_e);_88[_a]=_73;_88[_c]=_89;if(_73["_addIconClass"]){_8f(_88);}_73._itemsByIdentity[_8b]=_88;_73._allFileItems.push(_88);_8e.push(_88);_73._setValues(_89,_e,_8e,false);if(_73._loadFinished&&_8a){var _90={item:_89,attribute:_e,oldValue:_8d,newValue:_8e};_73.onNew(_88,(!_89[_b]?_90:null));}return _88;}throw new Error(_73.moduleName+"::_updateFileStore:newFile(): item ["+_88.path+"] already exist.");}else{if(!_73._rootDir){_88={name:_73._rootId,path:_73._rootId,directory:true};_88[_a]=_73;_88[_e]=[];_88[_d]=false;_88[_b]=true;if(_73["_addIconClass"]){_8f(_88);}_73._itemsByIdentity[_73._rootId]=_88;_73._allFileItems.push(_88);_73._rootDir=_88;return _88;}throw new Error(_73.moduleName+"::_updateFileStore:newFile(): item has no parent.");}};function _8f(_91){var icc;if(_91.directory){icc="fileIconDIR";}else{var _92=_91.name.lastIndexOf(".");if(_92>0){var ext=_91.name.substr(_92+1).toLowerCase();ext=ext.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();});icc="fileIcon"+ext;}else{icc="fileIconUnknown";}}_91["icon"]=icc+" fileIcon";};function _93(_94,_95){var _96=false;var _97,_98;var i;var _99=_73.getValues(_94,_e);var _9a=_73.getValues(_94,_e);var _9b=[];for(i=0;i<_95.length;i++){_97=_9c(_95[i],_94);_73._removeArrayElement(_9a,_97);_9b.push(_97);}if(_9a.length>0){_97=_9a.shift();while(_97){_73._deleteFromStore(_97,false);_97=_9a.shift();}_96=true;}if(_99.length!=_9b.length){_96=true;}if(_96&&_73._loadFinished){_73.onSet(_94,_e,_99,_9b);}_94[_d]=true;return _94;};function _9c(_9d,_9e){var _9f=_9d[_f];var _a0=_9d.oldPath;var _a1;if(_a0&&_a0!==_9f){var _a2=_73._getItemByIdentity(_a0);if(_a2){_73._deleteFromStore(_a2,true);delete _9d.oldPath;}else{throw new Error(_73.moduleName+"::_updateFileStore:updateFile(): Unable to resolve ["+_a0+"].");}}if(!_9e){var _a3=_9f.lastIndexOf("/");var _a4=_9f.substr(0,_a3)||_9f;_9e=_78(_a4);}_a1=_73._getItemByIdentity(_9f);if(_a1&&_a1.directory!==_9d.directory){_73._deleteFromStore(_a1,true);_a1=null;}if(_a1){_7f(_a1,_9d,true);}else{if(_9d.directory){_a1=_78(_9f);_7f(_a1,_9d,false);}else{_a1=_7e(_9d,_9e,true);}}if(_a1.directory&&_9d[_d]){_93(_a1,_9d[_e]);}return _a1;};if(_71){var _a5=_71.items,_a6,_a7=[],_a8,i;if(_a5){if(_a5.length>1){var _a9=new _9([{attribute:_f}]);_a5.sort(_a9.sortFunction());}for(i=0;i<_a5.length;i++){_a6=_73.getIdentity(_a5[i]);if(_a6){switch(_70){case "DELETE":var _aa=_74(_a6);_a7=_a7.concat(_aa);break;case "GET":case "POST":_a8=_9c(_a5[i],null);_a7.push(_a8);break;}}else{}}this._loadFinished=true;return _a7;}}throw new Error(this.moduleName+"::_updateFileStore(): Empty or malformed server response.");},attachToRoot:function(_ab){this._assertIsItem(_ab);var _ac=this._rootId+"/"+_ab.name;this.renameItem(_ab,_ac);},close:function(_ad){if(this._loadInProgress){this._queueRequest({args:_ad,func:this.close,scope:this});this._closePending=true;}else{if(this.clearOnClose){this._closePending=true;this._queuedFetches=[];this._itemsByIdentity={};this._allFileItems=[];this._rootDir=null;this._loadFinished=false;this._loadInProgress=false;this._validated=false;}this.onClose(this.clearOnClose);this._closePending=false;}},containsValue:function(_ae,_af,_b0){var _b1=undefined;if(typeof _b0==="string"){_b1=_8.patternToRegExp(_b0,false);}return this._containsValue(_ae,_af,_b0,_b1);},deleteItem:function(_b2,_b3,_b4,_b5,_b6){var _b6=_b6||_5.global;var _b7=this;this._assertIsItem(_b2);if(_b3){if(_b3.call(_b6,_b2)!==true){return;}}var _b8={item:_b2,onComplete:_b4,onError:_b5,scope:_b6};this._deleteFromServer(_b8);return _b8;},fetch:function(_b9){var _ba=_b9.scope||_5.global;var _bb=_b9.queryOptions||null;var _bc=_bb?_bb.storeOnly:false;var _bd="GET";var _be=this;if((this.cache||_bc)&&this._loadFinished){this._fetchFinal(_b9,this._getItemsArray(_bb));}else{if(this._loadInProgress){this._queueRequest({args:_b9,func:this.fetch,scope:_be});}else{this._loadInProgress=true;var _bf=this._requestToArgs(_bd,_b9);var _c0=_6.get(_bf);_c0.addCallback(function(_c1){try{_be._updateFileStore(_bd,_c1,_b9);_be._loadInProgress=false;_be._fetchFinal(_b9,_be._getItemsArray(_bb));}catch(error){_be._loadInProgress=false;if(_b9.onError){_b9.onError.call(_ba,error);}else{console.error(error);}}_be._handleQueuedRequest();});_c0.addErrback(function(_c2){_be._loadInProgress=false;if(_b9.onError){_b9.onError.call(_ba,_c2,_bf.status);}else{console.error(_c2);}_be._handleQueuedRequest();});}}_b9.abort=function(){this.aborted=true;};return _b9;},fetchChildren:function(_c3){var _c4=_c3.scope||_5.global;var _c5=_c3.item||this._rootDir;var _c6=this;this._assertIsItem(_c5);if(!this.isItemLoaded(_c5)||_c3.forceLoad){var _c7={item:_c5,forceLoad:_c3.forceLoad,onError:_c3.onError,onItem:function(_c8){_c6._fetchFinal(_c3,_c8[_e]);}};this.loadItem(_c7);}else{this._fetchFinal(_c3,_c5[_e]);}_c3.abort=function(){this.aborted=true;};return _c3;},fetchItemByIdentity:function(_c9){var _ca=_c9.scope||_5.global;var _cb=_c9.identity||_c9[_f];var _cc=_c9.queryOptions||null;var _cd=_cc?_cc.storeOnly:false;var _ce="GET";var _cf=this;var _d0;_d0=this._getItemByIdentity(_cb);if((this.cache||_cd)&&this._loadFinished){if(_d0){if(_c9.onItem){_c9.onItem.call(_ca,_d0);}return;}}if(this._loadInProgress){this._queueRequest({args:_c9,func:this.fetchItemByIdentity,scope:_cf});}else{this._loadInProgress=true;var _d1={path:_cb};var _d2=this._requestToArgs(_ce,_d1);var _d3=_6.get(_d2);_d3.addCallback(function(_d4){try{_cf._updateFileStore(_ce,_d4,_c9);_cf._loadInProgress=false;if(_c9.onItem){_d0=_cf._getItemByIdentity(_cb);_c9.onItem.call(_ca,_d0);}}catch(error){_cf._loadInProgress=false;if(_c9.onError){_c9.onError.call(_ca,error);}else{console.error(error);}}_cf._handleQueuedRequest();});_d3.addErrback(function(_d5){_cf._loadInProgress=false;switch(_d2.status){case 404:case 410:if(_d0){_cf._resyncStore(_d0);}default:if(_c9.onError){_c9.onError.call(_ca,_d5,_d2.status);}}_cf._handleQueuedRequest();});}},getAttributes:function(_d6){this._assertIsItem(_d6);var _d7=[];for(var key in _d6){if(!this._isPrivateAttr(key)){_d7.push(key);}}return _d7;},getDirectory:function(_d8){this._assertIsItem(_d8);var _d9;_d9=this.getValue(_d8,_c);if(_d9){return this.getPath(_d9);}return;},getFeatures:function(){return this._features;},getIdentity:function(_da){if(_da){return _da[_f];}},getIdentifierAttr:function(){return _f;},getIdentityAttributes:function(_db){return [_f];},getLabel:function(_dc){if(this._labelAttr&&this.isItem(_dc)){return this.getValue(_dc,this._labelAttr);}return undefined;},getLabelAttributes:function(_dd){return (this._labelAttr?[this._labelAttr]:null);},getParents:function(_de){if(_de){if(_de[_c]==this._rootDir){return [];}return this.getValues(_de,_c);}},getPath:function(_df){this._assertIsItem(_df);return _df[_f];},getValue:function(_e0,_e1,_e2){var _e3=this.getValues(_e0,_e1);return (_e3.length>0)?_e3[0]:_e2;},getValues:function(_e4,_e5){var _e6=[];this._assertIsItem(_e4);this._assertIsAttribute(_e5,"getValues");if(_e4[_e5]!==undefined){_e6=_4.isArray(_e4[_e5])?_e4[_e5]:[_e4[_e5]];}return _e6.slice(0);},hasAttribute:function(_e7,_e8){this._assertIsItem(_e7);this._assertIsAttribute(_e8,"hasAttribute");return (_e8 in _e7);},isItem:function(_e9){if(_e9&&_e9[_a]===this){if(this._itemsByIdentity[_e9[_f]]===_e9){return true;}}return false;},isItemLoaded:function(_ea){var _eb=this.isItem(_ea);if(_eb){if(_ea.directory&&!_ea[_d]){_eb=false;}}return _eb;},isRootItem:function(_ec){this._assertIsItem(_ec);var _ed=this.getValue(_ec,_c);if(_ed&&_ed[_b]){return true;}return false;},isValidated:function(){return this._validated;},loadItem:function(_ee){var _ef=_ee.queryOptions||null;var _f0=_ee.forceLoad||false;var _f1=_ee.scope||_5.global;var _f2=_ee.sort||null;var _f3=_ee.item;var _f4="GET";var _f5=this;if(!this.isItem(_f3)){return;}if(_f0!==true){if(this.isItemLoaded(_f3)){return;}}var _f6=this.getIdentity(_f3);if(this._loadInProgress){this._queueRequest({args:_ee,func:this.loadItem,scope:_f5});}else{this._loadInProgress=true;var _f7={path:_f6};var _f8=this._requestToArgs(_f4,_f7);var _f9=_6.get(_f8);_f9.addCallback(function(_fa){try{_f5._updateFileStore(_f4,_fa,_ee);_f5._loadInProgress=false;if(_ee.onItem){_f3=_f5._getItemByIdentity(_f6);_ee.onItem.call(_f1,_f3);}}catch(error){_f5._loadInProgress=false;if(_ee.onError){_ee.onError(error);}else{console.error(error);}}_f5._handleQueuedRequest();});_f9.addErrback(function(_fb){_f5._loadInProgress=false;if(_f3!==_f5._rootDir){switch(_f8.status){case 404:case 410:_f5._resyncStore(_f3);break;}}if(_ee.onError){_ee.onError.call(_f1,_fb,_f8.status);}_f5._handleQueuedRequest();});}},loadStore:function(_fc){var _fd=_fc.scope||_5.global;var _fe=this;function _ff(_100,_101){var _102=_101.loadArgs||null;var _103=_102.scope;_fe.onLoad(_100);if(_102){if(_102.onComplete){_102.onComplete.call(_103,_100);}}};if(!this._loadFinished){if(this._loadInProgress){this._queueRequest({args:_fc,func:this.loadStore,scope:_fe});}else{var _104={queryOptions:{deep:true},loadArgs:_fc,onBegin:_ff,onError:_fc.onError,scope:this};try{this.fetch(_104);}catch(err){if(onError){onError.call(_fd,err);}else{throw err;}}}}else{if(onComplete){onComplete.call(_fd,this._allFileItems.length);}}},renameItem:function(item,_105,_106,_107,_108){var _108=_108||_5.global;this._assertIsItem(item);this._assertIsAttribute(_105,"renameItem");if(item!=this._rootDir){if(item[_f]!==_105){var _109={item:item,newValue:_105,onItem:_106,onError:_107,scope:_108};this._renameItem(_109);}else{if(_4.isFunction(_106)){_106.call(_108,item);}}}},set:function(_10a,_10b){if(_4.isString(_10a)){var cc=_10a.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();});var _10c="_set"+cc+"Attr";if(_4.isFunction(this[_10c])){return this[_10c](_10b);}else{if(this[_10a]!==undefined){this[_10a]=_10b;return this[_10a];}}}throw new Error(this.moduleName+"::set(): Invalid attribute");},setValidated:function(_10d){this._validated=Boolean(_10d);},setValue:function(item,_10e,_10f){var _110;var i;this._assertIsItem(item);this._assertIsAttribute(_10e,"setValue");if(typeof _10f==="undefined"){throw new Error(this.moduleName+"::setValue(): newValue is undefined");}if(_10e!==_f){if(this._isReadOnlyAttr(_10e)||this._isPrivateAttr(_10e)){throw new Error(this.moduleName+"::setValue(): attribute ["+_10e+"] is private or read-only");}return this._setValue(item,_10e,_10f,true);}else{if(item[_f]!==_10f){this._renameItem({item:item,newValue:_10f});}}},setValues:function(item,_111,_112){var _113;var i;this._assertIsItem(item);this._assertIsAttribute(_111,"setValues");if(typeof _112==="undefined"){throw new Error(this.moduleName+"::setValue(): newValue is undefined");}if(this._isReadOnlyAttr(_111)||this._isPrivateAttr(_111)){throw new Error(this.moduleName+"::setValues(): attribute ["+_111+"] is private or read-only");}return this._setValues(item,_111,_112,true);},unsetAttribute:function(item,_114){return this.setValues(item,_114,[]);},onClose:function(_115){},onDelete:function(item){var _116=item[_c];if(_116&&_116[_b]){this.onRoot(item,"delete");}},onLoad:function(_117){},onNew:function(item,_118){if(this.isRootItem(item)){this.onRoot(item,"new");}},onRoot:function(item,_119){},onSet:function(item,_11a,_11b,_11c){},isDirty:function(item){return false;},newItem:function(){this._assertSupport("newItem");},revert:function(){},save:function(){},addReference:function(){this._assertSupport("addReference");},detachFromRoot:function(){this._assertSupport("detachFromRoot");},itemExist:function(_11d){var _11e;if(typeof _11d!="object"){throw new Error(this.moduleName+"::itemExist(): argument is not an object.");}_11e=_11d[_f];if(typeof _11e==="undefined"){throw new Error(this.moduleName+"::itemExist(): argument does not include an identity.");}return this._getItemByIdentity(_11e);},removeReference:function(){this._assertSupport("removeReference");}});return _10;});