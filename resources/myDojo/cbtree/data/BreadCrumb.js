//>>built
require({cache:{"url:cbtree/templates/TrailBarItem.html":"<div class=\"dijitReset dijitInline dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\n\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t<span data-dojo-attach-point=\"containerNode\"></span>\n</div>\n"}});define("cbtree/data/BreadCrumb",["dojo/_base/array","dojo/_base/declare","dojo/_base/event","dojo/_base/lang","dijit/MenuBar","dijit/MenuItem","dijit/MenuBarItem","dijit/DropDownMenu","dijit/registry","dojo/text!../templates/TrailBarItem.html","../Evented"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b){var _c=_2([_6],{iconClass:"dijitEditorIcon dijitEditorIconTabIndent",templateString:_a,popup:null,constructor:function(_d){this.popup=new _8({});}});var _e=_2([_7,_b],{trail:null,item:null,moduleName:"cbTree/stores/BreadCrumb",constructor:function(_f){this.trail=_f.trail;this.item=_f.item;if(this.trail&&this.item){var _10=this.trail.store;var _11=this.item;this.label=_10.getLabel(_11);this.path=_10.getValue(_11,"path");if(this.item.directory){this.tag=new _c();_10.fetchChildren({item:_11,query:{directory:true},queryOptions:{storeOnly:true},onComplete:this._dropDownMenu,scope:this});}}else{throw new Error(this.moduleName+"::constructor(): Both trail and item are required arguments.");}},_addToTrail:function(){this.trail.addChild(this);this.trail.addChild(this.tag);},_dropDownMenu:function(_12){var _13=this.tag.popup;var _14;_1.forEach(_12,function(_15){_14=new _6({label:_15.name,iconClass:this.trail._dirIconClass,onClick:_4.hitch(this,this.onClick)});_14.item=_15;_13.addChild(_14);},this);},postCreate:function(){this._addToTrail();},onClick:function(evt){var _16=_9.getEnclosingWidget(evt.target);this.trail.onClick(_16.item,_16,evt);_3.stop(evt);}});var _17=_2([_5,_b],{store:null,moduleName:"cbTree/stores/CrumbTrail",_dirIconClass:"dijitIcon dijitFolderClosed",constructor:function(_18){this._customIcon=false;this._crumbs={};this.store=_18.store||null;if(this.store){this._setTrailAttr(".");if(_18.cssBaseClass){if(_18.cssBaseClass!=="fileIcon"){this._dirIconClass=_18.cssBaseClass+" "+_18.cssBaseClass+"Collapsed";}else{this._dirIconClass="fileIcon fileIconDIR fileIconDIRCollapsed";}}}else{throw new Error(this.moduleName+"::constructor(): store argument is required.");}},_addBreadCrumb:function(_19){if(_19){var _1a=this.store.getIdentity(_19);var _1b=this._crumbs[_1a];if(!_1b){_1b=new _e({trail:this,item:_19});this._crumbs[_1a]=_1b;}else{_1b._addToTrail();}}},_clearTrail:function(){var _1c=this.getChildren();var i;for(i=0;i<_1c.length;i++){this.removeChild(_1c[i]);}},_setTrailAttr:function(_1d){var _1e=this.store;var _1f=this;if(_1d&&_4.isString(_1d)){var _20=_1d.split("/");var _21="",i;this._clearTrail();for(i=0;i<_20.length;i++){_21=_21+_20[i];_1e.fetchItemByIdentity({identity:_21,queryOptions:{storeOnly:true},onItem:_1f._addBreadCrumb,scope:this});_21=_21+"/";}}else{throw new Error(this.moduleName+"::_setTrailAttr(): invalid path argument.");}return true;},setTrail:function(_22){return this._setTrailAttr(_22);},onClick:function(){}});return _17;});