//>>built
define("dgrid/List",["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/on","dojo/has","./util/misc","dojo/_base/sniff"],function(_1,_2,_3,_4,_5,_6){var _7=[];if(_5("mozilla")){_7.push("has-mozilla");}if(_5("touch")){_7.push("has-touch");}_3.add(document.documentElement,_7);_5.add("pointer",function(_8){return "PointerEvent" in _8?"pointer":"MSPointerEvent" in _8?"MSPointer":false;});var _9="dgrid-row-odd",_a="dgrid-row-even",_b,_c;function _d(id){return document.getElementById(id);};function _e(_f){_f.className="";if(_f.parentNode){document.body.removeChild(_f);}};function _10(_11,_12){_11.className="dgrid-scrollbar-measure";document.body.appendChild(_11);var _13=_11["offset"+_12]-_11["client"+_12];_e(_11);return _13;};_5.add("dom-scrollbar-width",function(_14,doc,_15){return _10(_15,"Width");});_5.add("dom-scrollbar-height",function(_16,doc,_17){return _10(_17,"Height");});_5.add("dom-rtl-scrollbar-left",function(_18,doc,_19){var div=document.createElement("div"),_1a;_19.className="dgrid-scrollbar-measure";_19.setAttribute("dir","rtl");_19.appendChild(div);document.body.appendChild(_19);_1a=!!_5("ie")||!!_5("trident")||div.offsetLeft>=_5("dom-scrollbar-width");_e(_19);_2.destroy(div);_19.removeAttribute("dir");return _1a;});var _1b=0;function _1c(){return _1d.autoIdPrefix+_1b++;};function _1e(cls){_3.replace(this.domNode,cls,this._class||"");this._class=cls;};function _1f(){return this._class;};var _20=function(){if(this._started){this.resize();}};var _1d=_1(null,{tabableHeader:false,showHeader:false,showFooter:false,maintainOddEven:true,cleanAddedRules:true,addUiClasses:true,highlightDuration:250,postscript:function(_21,_22){var _23=this;(this._Row=function(id,_24,_25){this.id=id;this.data=_24;this.element=_25;}).prototype.remove=function(){_23.removeRow(this.element);};if(_22){this.srcNodeRef=_22=_22.nodeType?_22:_d(_22);}this.create(_21,_22);},listType:"list",create:function(_26,_27){var _28=this.domNode=_27||document.createElement("div"),cls;if(_26){this.params=_26;_1.safeMixin(this,_26);cls=_26["class"]||_26.className||_28.className;}this.sort=this.sort||[];this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=_28.id=_28.id||this.id||_1c();this.buildRendering();if(cls){_1e.call(this,cls);}this.postCreate();delete this.srcNodeRef;if(this.domNode.offsetHeight){this.startup();}},buildRendering:function(){var _29=this.domNode,_2a=this.addUiClasses,_2b=this,_2c,_2d,_2e,_2f;_2f=this.isRTL=(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase()==="rtl";_29.className="";_29.setAttribute("role","grid");_3.add(_29,"dgrid dgrid-"+this.listType+(_2a?" ui-widget":""));_2c=this.headerNode=_2.create("div",{className:"dgrid-header dgrid-header-row"+(_2a?" ui-widget-header":"")+(this.showHeader?"":" dgrid-header-hidden")},_29);_2d=this.bodyNode=_2.create("div",{className:"dgrid-scroller"},_29);if(_5("ff")){_2d.tabIndex=-1;}this.headerScrollNode=_2.create("div",{className:"dgrid-header dgrid-header-scroll dgrid-scrollbar-width"+(_2a?" ui-widget-header":"")},_29);_2e=this.footerNode=_2.create("div",{className:"dgrid-footer"+(this.showFooter?"":" dgrid-footer-hidden")},_29);if(_2f){_29.className+=" dgrid-rtl"+(_5("dom-rtl-scrollbar-left")?" dgrid-rtl-swap":"");}_4(_2d,"scroll",function(_30){if(_2b.showHeader){_2c.scrollLeft=_30.scrollLeft||_2d.scrollLeft;}_30.stopPropagation();_4.emit(_29,"scroll",{scrollTarget:_2d});});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=_2.create("div",{className:"dgrid-content"+(_2a?" ui-widget-content":"")},this.bodyNode);this._listeners.push(this._resizeHandle=_4(window,"resize",_6.throttleDelayed(_20,this)));},postCreate:function(){},startup:function(){if(this._started){return;}this.inherited(arguments);this._started=true;this.resize();this.set("sort",this.sort);},configStructure:function(){},resize:function(){var _31=this.bodyNode,_32=this.headerNode,_33=this.footerNode,_34=_32.offsetHeight,_35=this.showFooter?_33.offsetHeight:0;this.headerScrollNode.style.height=_31.style.marginTop=_34+"px";_31.style.marginBottom=_35+"px";if(!_b){_b=_5("dom-scrollbar-width");_c=_5("dom-scrollbar-height");if(_5("ie")){_b++;_c++;}_6.addCssRule(".dgrid-scrollbar-width","width: "+_b+"px");_6.addCssRule(".dgrid-scrollbar-height","height: "+_c+"px");if(_b!==17){_6.addCssRule(".dgrid-header-row","right: "+_b+"px");_6.addCssRule(".dgrid-rtl-swap .dgrid-header-row","left: "+_b+"px");}}},addCssRule:function(_36,css){var _37=_6.addCssRule(_36,css);if(this.cleanAddedRules){this._listeners.push(_37);}return _37;},on:function(_38,_39){var _3a=_4(this.domNode,_38,_39);if(!_5("dom-addeventlistener")){this._listeners.push(_3a);}return _3a;},cleanup:function(){var i;for(i in this._rowIdToObject){if(this._rowIdToObject[i]!==this.columns){var _3b=_d(i);if(_3b){this.removeRow(_3b,true);}}}},destroy:function(){if(this._listeners){for(var i=this._listeners.length;i--;){this._listeners[i].remove();}this._listeners=null;}this._started=false;this.cleanup();_2.destroy(this.domNode);},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoRowId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0});},highlightRow:function(_3c,_3d){var _3e="dgrid-highlight"+(this.addUiClasses?" ui-state-highlight":"");_3c=_3c.element||_3c;_3.add(_3c,_3e);setTimeout(function(){_3.remove(_3c,_3e);},_3d||this.highlightDuration);},adjustRowIndices:function(_3f){var _40=_3f;var _41=_40.rowIndex;if(_41>-1){do{if(_40.rowIndex>-1){if(this.maintainOddEven){if(_3.contains(_40,"dgrid-row")){_3.replace(_40,(_41%2===1?_9:_a),(_41%2===0?_9:_a));}}_40.rowIndex=_41++;}}while((_40=_40.nextSibling)&&_40.rowIndex!==_41);}},renderArray:function(_42,_43,_44){_44=_44||{};var _45=this,_46=_44.start||0,_47=document.createDocumentFragment(),_48=[],_49,i=0,len=_42.length;if(!_43){this._lastCollection=_42;}while(i<len){_48[i]=this.insertRow(_42[i],_47,null,_46++,_44);i++;}_49=_43?_43.parentNode:_45.contentNode;if(_49&&_49.parentNode&&(_49!==_45.contentNode||len)){_49.insertBefore(_47,_43||null);if(len){_45.adjustRowIndices(_48[len-1]);}}return _48;},renderHeader:function(){},_autoRowId:0,insertRow:function(_4a,_4b,_4c,i,_4d){var id=this.id+"-row-"+((this.collection&&this.collection.getIdentity)?this.collection.getIdentity(_4a):this._autoRowId++),row=_d(id),_4e=row&&row.previousSibling;if(row){if(row===_4c){_4c=(_4c.connected||_4c).nextSibling;}this.removeRow(row);}row=this.renderRow(_4a,_4d);row.className=(row.className||"")+" dgrid-row "+(i%2===1?_9:_a)+(this.addUiClasses?" ui-state-default":"");this._rowIdToObject[row.id=id]=_4a;_4b.insertBefore(row,_4c||null);row.rowIndex=i;if(_4e&&_4e.rowIndex!==(row.rowIndex-1)){this.adjustRowIndices(_4e);}return row;},renderRow:function(_4f){var div=document.createElement("div");div.appendChild(document.createTextNode(_4f));return div;},removeRow:function(_50,_51){_50=_50.element||_50;delete this._rowIdToObject[_50.id];if(!_51){_2.destroy(_50);}},row:function(_52){var id;if(_52 instanceof this._Row){return _52;}if(_52.target&&_52.target.nodeType){_52=_52.target;}if(_52.nodeType){var _53;do{var _54=_52.id;if((_53=this._rowIdToObject[_54])){return new this._Row(_54.substring(this.id.length+5),_53,_52);}_52=_52.parentNode;}while(_52&&_52!==this.domNode);return;}if(typeof _52==="object"){id=this.collection.getIdentity(_52);}else{id=_52;_52=this._rowIdToObject[this.id+"-row-"+id];}return new this._Row(id,_52,_d(this.id+"-row-"+id));},cell:function(_55){return {row:this.row(_55)};},_move:function(_56,_57,_58,_59){var _5a,_5b,_5c;_5c=_5b=_56.element;_57=_57||1;do{if((_5a=_5b[_57<0?"previousSibling":"nextSibling"])){do{_5b=_5a;if(_5b&&(_5b.className+" ").indexOf(_58+" ")>-1){_5c=_5b;_57+=_57<0?1:-1;break;}}while((_5a=(!_59||!_5b.hidden)&&_5b[_57<0?"lastChild":"firstChild"]));}else{_5b=_5b.parentNode;if(!_5b||_5b===this.bodyNode||_5b===this.headerNode){break;}}}while(_57);return _5c;},up:function(row,_5d,_5e){if(!row.element){row=this.row(row);}return this.row(this._move(row,-(_5d||1),"dgrid-row",_5e));},down:function(row,_5f,_60){if(!row.element){row=this.row(row);}return this.row(this._move(row,_5f||1,"dgrid-row",_60));},scrollTo:function(_61){if(typeof _61.x!=="undefined"){this.bodyNode.scrollLeft=_61.x;}if(typeof _61.y!=="undefined"){this.bodyNode.scrollTop=_61.y;}},getScrollPosition:function(){return {x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop};},get:function(_62){var fn="_get"+_62.charAt(0).toUpperCase()+_62.slice(1);if(typeof this[fn]==="function"){return this[fn].apply(this,[].slice.call(arguments,1));}if(!1&&typeof this[fn+"Attr"]==="function"){console.warn("dgrid: Use "+fn+" instead of "+fn+"Attr for getting "+_62);}return this[_62];},set:function(_63,_64){if(typeof _63==="object"){for(var k in _63){this.set(k,_63[k]);}}else{var fn="_set"+_63.charAt(0).toUpperCase()+_63.slice(1);if(typeof this[fn]==="function"){this[fn].apply(this,[].slice.call(arguments,1));}else{if(!1&&typeof this[fn+"Attr"]==="function"){console.warn("dgrid: Use "+fn+" instead of "+fn+"Attr for setting "+_63);}this[_63]=_64;}}return this;},_getClass:_1f,_setClass:_1e,_getClassName:_1f,_setClassName:_1e,_setSort:function(_65,_66){this.sort=typeof _65!=="string"?_65:[{property:_65,descending:_66}];this._applySort();},_applySort:function(){this.refresh();if(this._lastCollection){var _67=this.sort;if(_67&&_67.length>0){var _68=_67[0].property,_69=!!_67[0].descending;this._lastCollection.sort(function(a,b){var _6a=a[_68],_6b=b[_68];if(_6a===undefined){_6a="";}if(_6b===undefined){_6b="";}return _6a===_6b?0:(_6a>_6b!==_69?1:-1);});}this.renderArray(this._lastCollection);}},_setShowHeader:function(_6c){var _6d=this.headerNode;this.showHeader=_6c;_3.toggle(_6d,"dgrid-header-hidden",!_6c);this.renderHeader();this.resize();if(_6c){_6d.scrollLeft=this.getScrollPosition().x;}},_setShowFooter:function(_6e){this.showFooter=_6e;_3.toggle(this.footerNode,"dgrid-footer-hidden",!_6e);this.resize();}});_1d.autoIdPrefix="dgrid_";return _1d;});